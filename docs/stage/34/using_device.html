<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta name="generator" content="Doxygen 1.8.13" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RDMnet: Using the Device API</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
  <!--BEGIN CUSTOM SCRIPTS-->
  <script type="text/javascript">
    $(function () {
      $.get('/RDMnet/docs/versions.txt', function (data) {
        if (data) {
          var lines = data.split('\n');
          if (lines.length > 0) {
            var version_select = $("#version_select").empty();
            lines.forEach(function (line) {
              line = line.trim();
              if (!line) {
                return;
              }
              line = line.split(':');
              var option_name = line[0].replace(/^v/, '');
              if (line.length > 1) {
                option_name += ' (' + line[1] + ')';
              }
              var option_val = '/RDMnet/docs/' + line[0];
              var option = $('<option></option>').attr("value", option_val)
                .text(option_name);
              if (window.location.pathname.match('docs/' + line[0])) {
                option = option.attr("selected", "selected");
              }
              version_select.append(option);
            });
          }
        }
      }, 'text');
    });
  </script>
  <script type="text/javascript">
    $(function () { selectAllC() });
  </script>
  <script type="text/javascript">
    function selectAllC() {
      // Enable all C-language blocks
      var tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        if (tabcontent[i].id.endsWith("_c")) {
          tabcontent[i].style.display = "block";
        } else {
          tabcontent[i].style.display = "none"
        }
      }
      // Enable all C-language buttons
      var tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        if (tablinks[i].id.endsWith("_c")) {
          if (!tablinks[i].className.includes("active")) {
            tablinks[i].className = tablinks[i].className += " active";
          }
        } else {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
      }
    }
    function selectAllCpp() {
      // Enable all C++-language blocks
      var tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        if (tabcontent[i].id.endsWith("_cpp")) {
          tabcontent[i].style.display = "block";
        } else {
          tabcontent[i].style.display = "none"
        }
      }
      // Enable all C++-language buttons
      var tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        if (tablinks[i].id.endsWith("_cpp")) {
          if (!tablinks[i].className.includes("active")) {
            tablinks[i].className = tablinks[i].className += " active";
          }
        } else {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
      }
    }
    function selectLanguage(evt, block_id, language) {
      // Get all elements with class="tabcontent" and hide them
      var tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        if (tabcontent[i].id.startsWith("div_" + block_id)) {
          tabcontent[i].style.display = "none";
        }
      }
      // Get all elements with class="tablinks" and remove the class "active"
      var tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        if (tablinks[i].id.startsWith("button_" + block_id)) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
      }
      // Show the current tab, and add an "active" class to the button that opened the tab
      document.getElementById("div_" + block_id + "_" + language).style.display = "block";
      if (!evt.currentTarget.className.includes("active")) {
        evt.currentTarget.className += " active";
      }
    }
  </script>
  <!--END CUSTOM SCRIPT-->
</head>
<body>
  <div id="top">
    <!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0" style="width: 100%">
        <tbody>
          <tr style="height: 56px;">
            <td id="projectalign" style="padding-left: 0.5em;">
              <div id="projectname">RDMnet
                &#160;<span id="projectnumber">Staging for pull request 34</span>
              </div>
              <div id="projectbrief">Implementation of ANSI E1.33 (RDMnet)</div>
            </td>
            <!--BEGIN CUSTOM INSERTED SECTION-->
            <td style="text-align: right; padding-right: 0.5em">
              <div id="otherversions">
                View other versions:
                <select id="version_select" onchange="location = this.value">
                </select>
              </div>
            </td>
            <!--END CUSTOM INSERTED SECTION-->
          </tr>
        </tbody>
      </table>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_device.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using the Device API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The RDMnet Device API exposes both a C and C++ language interface. The C++ interface is a header-only wrapper around the C interface.</p>
<p> 
<div class="tab">
  <button id="button_1_c" class="tablinks" onclick="selectAllC()">Show All C Snippets</button>
  <button id="button_1_cpp" class="tablinks" onclick="selectAllCpp()">Show All C++ Snippets</button>
</div>
</p>
<h2>Initialization</h2>
<p>The RDMnet library must be globally initialized before using the RDMnet Device API. See <a class="el" href="global_init_and_destroy.html">Global Initialization and Destruction</a>.</p>
<p>To create a device instance, use the <a class="el" href="group__rdmnet__device.html#gaeed7f09d54c4f10901ab68a7c3df5fdd" title="Create a new instance of RDMnet device functionality. ">rdmnet_device_create()</a> function in C, or instantiate an <a class="el" href="classrdmnet_1_1_device.html" title="An instance of RDMnet device functionality. ">rdmnet::Device</a> and call its Startup() function in C++.</p>
<p>The RDMnet device API is an asynchronous, callback-oriented API. Part of the initial configuration for a device instance is a set of function pointers (or abstract interface) for the library to use as callbacks. Callbacks are dispatched from the background thread that is started when the RDMnet library is initialized.</p>
<p> 
<div class="tab">
  <button id="button_2_c" class="tablinks" onclick="selectLanguage(event, '2', 'c')">C</button>
  <button id="button_2_cpp" class="tablinks" onclick="selectLanguage(event, '2', 'cpp')">C++</button>
</div>
<div id="div_2_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="device_8h.html">rdmnet/device.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Sets optional values to defaults. Must pass your ESTA manufacturer ID. If you have not yet</span></div><div class="line"><span class="comment">// requested an ESTA manufacturer ID, the range 0x7ff0 to 0x7fff can be used for prototyping.</span></div><div class="line"><a class="code" href="struct_rdmnet_device_config.html">RdmnetDeviceConfig</a> config = <a class="code" href="group__rdmnet__device.html#gac8e03e329deb576755450ed19c0d5ca8">RDMNET_DEVICE_CONFIG_DEFAULT_INIT</a>(MY_ESTA_MANUFACTURER_ID_VAL);</div><div class="line"></div><div class="line"><span class="comment">// Each device is a component that must have a Component ID (CID), which is simply a UUID. Pure</span></div><div class="line"><span class="comment">// redistributable software apps may generate a new CID on each run, but hardware-locked devices</span></div><div class="line"><span class="comment">// should use a consistent CID locked to a MAC address (a V3 or V5 UUID).</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__uuid.html#ga1a5104de6a3c54113edf234e0840dcda">etcpal_generate_device_uuid</a>(<span class="stringliteral">&quot;My Device Name&quot;</span>, &amp;device_mac_addr, 0, &amp;config.<a class="code" href="struct_rdmnet_device_config.html#ae68596928501f9b5f49882a35470d6dc">cid</a>);</div><div class="line"></div><div class="line"><span class="comment">// Set the callback functions - defined elsewhere</span></div><div class="line"><span class="comment">// p_some_opaque_data is an opaque data pointer that will be passed back to each callback function</span></div><div class="line"><a class="code" href="group__rdmnet__device.html#ga1362a07817e5eae55fde6270474321fa">rdmnet_device_set_callbacks</a>(&amp;config, my_device_connected_cb, my_device_connect_failed_cb,</div><div class="line">                            my_device_disconnected_cb, my_device_rdm_command_received_cb,</div><div class="line">                            my_device_llrp_rdm_command_received_cb, p_some_opaque_data);</div><div class="line"></div><div class="line"><a class="code" href="group__rdmnet__device.html#ga527b7210f4bc35da527d698f54681266">rdmnet_device_t</a> my_device_handle;</div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#gaeed7f09d54c4f10901ab68a7c3df5fdd">rdmnet_device_create</a>(&amp;config, &amp;my_device_handle);</div><div class="line"><span class="keywordflow">if</span> (result == <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div><div class="line">{</div><div class="line">  <span class="comment">// Handle is valid and may be referenced in later calls to API functions.</span></div><div class="line">}</div><div class="line"><span class="keywordflow">else</span></div><div class="line">{</div><div class="line">  <span class="comment">// Some error occurred, handle is not valid.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_2_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpp_2device_8h.html">rdmnet/cpp/device.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>MyDeviceNotifyHandler : <span class="keyword">public</span> <a class="code" href="classrdmnet_1_1_device_notify_handler.html">rdmnet::DeviceNotifyHandler</a></div><div class="line">{</div><div class="line">  <span class="comment">// Implement the DeviceNotifyHandler callbacks...</span></div><div class="line">};</div><div class="line"></div><div class="line">MyDeviceNotifyHandler my_device_notify_handler;</div><div class="line"></div><div class="line"><span class="comment">// Example method for generating a CID for a hardware-locked device:</span></div><div class="line"><span class="keyword">auto</span> my_cid = <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/classetcpal_1_1_uuid.html#a30a2f58b68d4d0e7d2ae6a63213a388a">etcpal::Uuid::Device</a>(<span class="stringliteral">&quot;My Device Name&quot;</span>, device_mac_addr, 0);</div><div class="line"></div><div class="line"><a class="code" href="structrdmnet_1_1_device_settings.html">rdmnet::DeviceSettings</a> settings(my_cid, MY_ESTA_MANUFACTURER_ID_VAL);</div><div class="line"><a class="code" href="classrdmnet_1_1_device.html">rdmnet::Device</a> device;</div><div class="line"></div><div class="line"><span class="comment">// In this example we are using the convenience method to startup with the default scope. The</span></div><div class="line"><span class="comment">// Startup() overloads can be used to specify a scope to start on.</span></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a804d9d0ecf7f59d1ea1fd22709d522fb">StartupWithDefaultScope</a>(my_device_notify_handler, settings);</div><div class="line"><span class="keywordflow">if</span> (result)</div><div class="line">{</div><div class="line">  <span class="comment">// Device is valid and running.</span></div><div class="line">}</div><div class="line"><span class="keywordflow">else</span></div><div class="line">{</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;RDMnet device startup failed with error: &quot;</span> &lt;&lt; result.<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<h2>Deinitialization</h2>
<p>The device should be shut down and destroyed gracefully before program termination. This will send a graceful disconnect message to any connected broker and deallocate the device's resources.</p>
<p> 
<div class="tab">
  <button id="button_3_c" class="tablinks" onclick="selectLanguage(event, '3', 'c')">C</button>
  <button id="button_3_cpp" class="tablinks" onclick="selectLanguage(event, '3', 'cpp')">C++</button>
</div>
<div id="div_3_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><a class="code" href="group__rdmnet__device.html#ga11d7eec0a099562a80d9243d8c08042c">rdmnet_device_destroy</a>(my_device_handle, <a class="code" href="group__rdmnet__api__common.html#gga3eb1adaf6e830a807d1dcfbc64197222a336a46d8d36f5b1f32fac4653913cdd2">kRdmnetDisconnectShutdown</a>);</div><div class="line"></div><div class="line"><span class="comment">// At this point, the device is no longer running and its handle is no longer valid.</span></div></div><!-- fragment --><p> 
</div>
<div id="div_3_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line">device.<a class="code" href="classrdmnet_1_1_device.html#a84538ed8fcb63d968c760649df74c61c">Shutdown</a>();</div><div class="line"></div><div class="line"><span class="comment">// At this point, the device is no longer running and its handle is no longer valid. It can be</span></div><div class="line"><span class="comment">// started again (with a new handle) by calling Startup() again.</span></div></div><!-- fragment --><p> 
</div>
</p>
<h2>Managing Scopes</h2>
<p>Devices operate on a single RDMnet scope at a time, which is set at initial configuration time when the device instance is created, and can be changed using <a class="el" href="group__rdmnet__device.html#ga632bb5b71db04e29a77193ecd33b90d5" title="Change the device&#39;s scope. ">rdmnet_device_change_scope()</a>. See the "Scopes" section in <a class="el" href="how_it_works.html">How RDMnet Works</a> for more information on scopes.</p>
<p>On startup, a device will immediately begin the scope connection state machine from the RDMnet tick thread. If a static configuration is not provided (using the <a class="el" href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f" title="Initialize an RdmnetScopeConfig struct with a scope string. ">RDMNET_CLIENT_SET_SCOPE()</a> macro to initialize the device's <a class="el" href="struct_rdmnet_scope_config.html" title="A set of configuration information for a single scope in which an RDMnet client is participating...">RdmnetScopeConfig</a>, or calling <a class="el" href="classrdmnet_1_1_device.html#a65eb40cbde4c5d4386daa40e0027a403" title="Allocate resources and start up this device with the given configuration on the given RDMnet scope...">rdmnet::Device::Startup()</a> without a static_broker_addr argument), the first action will be to attempt to discover brokers for this scope via DNS-SD. Once a broker is found, connection will be initiated automatically, and the result will be delivered via either the connected or connect_failed callback.</p>
<p>If a broker for a given scope has been configured with a static IP address and port, you can skip DNS-SD discovery by providing this address to the relevant functions/macros.</p>
<p>You can change the initial scope configuration before the device is started:</p>
<p> 
<div class="tab">
  <button id="button_4_c" class="tablinks" onclick="selectLanguage(event, '4', 'c')">C</button>
  <button id="button_4_cpp" class="tablinks" onclick="selectLanguage(event, '4', 'cpp')">C++</button>
</div>
<div id="div_4_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><a class="code" href="struct_rdmnet_device_config.html">RdmnetDeviceConfig</a> config = <a class="code" href="group__rdmnet__device.html#gac8e03e329deb576755450ed19c0d5ca8">RDMNET_DEVICE_CONFIG_DEFAULT_INIT</a>(MY_ESTA_MANUFACTURER_ID_VAL);</div><div class="line"></div><div class="line"><span class="comment">// Edit the scope information in the configuration struct</span></div><div class="line"></div><div class="line"><a class="code" href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f">RDMNET_CLIENT_SET_SCOPE</a>(&amp;config.<a class="code" href="struct_rdmnet_device_config.html#a4e5acc99018738e60e1de429f581cdf7">scope_config</a>, <span class="stringliteral">&quot;My initial scope&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Or, if configured with a static broker address...</span></div><div class="line"><a class="code" href="group__rdmnet__api__common.html#ga500c0af02a2db3a6b835f26cf304da85">RDMNET_CLIENT_SET_STATIC_SCOPE</a>(&amp;config.<a class="code" href="struct_rdmnet_device_config.html#a4e5acc99018738e60e1de429f581cdf7">scope_config</a>, <span class="stringliteral">&quot;My initial scope&quot;</span>, static_broker_addr);</div></div><!-- fragment --><p> 
</div>
<div id="div_4_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a65eb40cbde4c5d4386daa40e0027a403">Startup</a>(my_device_notify_handler, settings, <span class="stringliteral">&quot;My initial scope&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Or, if configured with a static broker address...</span></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a65eb40cbde4c5d4386daa40e0027a403">Startup</a>(my_device_notify_handler, settings, <span class="stringliteral">&quot;My initial scope&quot;</span>, my_static_broker_addr);</div></div><!-- fragment --><p> 
</div>
</p>
<p>Or change the scope while the device is running. This will cause the device to disconnect from the old scope and connect to the new one.</p>
<p> 
<div class="tab">
  <button id="button_5_c" class="tablinks" onclick="selectLanguage(event, '5', 'c')">C</button>
  <button id="button_5_cpp" class="tablinks" onclick="selectLanguage(event, '5', 'cpp')">C++</button>
</div>
<div id="div_5_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><a class="code" href="struct_rdmnet_scope_config.html">RdmnetScopeConfig</a> new_scope_config;</div><div class="line"><a class="code" href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f">RDMNET_CLIENT_SET_SCOPE</a>(&amp;new_scope_config, <span class="stringliteral">&quot;My new scope&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// The disconnect_reason argument provides the RDMnet disconnect reason code to send on the current</span></div><div class="line"><span class="comment">// connected scope. Select the most appropriate value for why the scope is changing.</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#ga632bb5b71db04e29a77193ecd33b90d5">rdmnet_device_change_scope</a>(my_device_handle, &amp;new_scope_config, <a class="code" href="group__rdmnet__api__common.html#gga3eb1adaf6e830a807d1dcfbc64197222a25de5a2953a7a4ae379975bb300d8165">kRdmnetDisconnectUserReconfigure</a>);</div></div><!-- fragment --><p> 
</div>
<div id="div_5_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// The disconnect_reason argument provides the RDMnet disconnect reason code to send on the current</span></div><div class="line"><span class="comment">// connected scope. Select the most appropriate value for why the scope is changing.</span></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a9f0e9d76c4ce0487b0fd38edec014fe4">ChangeScope</a>(<span class="stringliteral">&quot;My new scope&quot;</span>, <a class="code" href="group__rdmnet__api__common.html#gga3eb1adaf6e830a807d1dcfbc64197222a25de5a2953a7a4ae379975bb300d8165">kRdmnetDisconnectUserReconfigure</a>);</div></div><!-- fragment --><p> 
</div>
</p>
<h2>Handling Callbacks</h2>
<p>The library will dispatch callback notifications from the context in which rdmnet_core_tick() is called (in the default configuration, this is a single dedicated worker thread). It is safe to call any RDMnet API function from any callback.</p>
<p>Generally the first callback a device gets will be when it has connected to a broker:</p>
<p> 
<div class="tab">
  <button id="button_6_c" class="tablinks" onclick="selectLanguage(event, '6', 'c')">C</button>
  <button id="button_6_cpp" class="tablinks" onclick="selectLanguage(event, '6', 'cpp')">C++</button>
</div>
<div id="div_6_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> device_connected_callback(<a class="code" href="group__rdmnet__device.html#ga527b7210f4bc35da527d698f54681266">rdmnet_device_t</a> handle, <span class="keyword">const</span> <a class="code" href="struct_rdmnet_client_connected_info.html">RdmnetClientConnectedInfo</a>* info, <span class="keywordtype">void</span>* context)</div><div class="line">{</div><div class="line">  <span class="keywordtype">char</span> addr_str[<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__inet.html#gacd7ec0d81e171166483c7629669bf05d">ETCPAL_IP_STRING_BYTES</a>];</div><div class="line">  <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__inet.html#gaf98da0ae21f7960b5e046c55b8d79c4a">etcpal_ip_to_string</a>(&amp;info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a39d671dfd8919b93fe23dba6dbfba905">broker_addr</a>.<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">ip</a>, addr_str);</div><div class="line">  printf(<span class="stringliteral">&quot;Connected to broker &#39;%s&#39; at address %s:%d\n&quot;</span>, info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a09b4687edadab4b4334a33b38d00cf2f">broker_name</a>, addr_str, info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a39d671dfd8919b93fe23dba6dbfba905">broker_addr</a>.<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_6_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyDeviceNotifyHandler::HandleConnectedToBroker(<a class="code" href="group__rdmnet__device__cpp.html#ga2a47837b20a3f1778644a15ff24077a2">rdmnet::DeviceHandle</a> handle, <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_client_connected_info.html">rdmnet::ClientConnectedInfo</a>&amp; info)</div><div class="line">{</div><div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Connected to broker &#39;&quot;</span> &lt;&lt; info.<a class="code" href="classrdmnet_1_1_client_connected_info.html#a751d070cb4c1f89d838955298270b6cf">broker_name</a>()</div><div class="line">            &lt;&lt; <span class="stringliteral">&quot;&#39; at IP address &quot;</span> &lt;&lt; info.<a class="code" href="classrdmnet_1_1_client_connected_info.html#af30653fa66bd5b267c54cf81a8c7eb3d">broker_addr</a>().<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/classetcpal_1_1_sock_addr.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<h3>Connection Failure</h3>
<p>It's worth noting connection failure as a special case here. RDMnet connections can fail for many reasons, including user misconfiguration, network misconfiguration, components starting up or shutting down, programming errors, and more.</p>
<p>The ClientConnectFailedInfo and ClientDisconnectedInfo structs passed back with the "connect failed" and "disconnected" callbacks respectively have comprehensive information about the failure, including enum values containing the library's categorization of the failure, protocol reason codes and socket errors where applicable. This information is typically used mostly for logging and debugging. Each of these codes has a respective <code>to_string()</code> function to aid in logging.</p>
<p>For programmatic use, the structs also contain a <code>will_retry</code> member which indicates whether the library plans to retry this connection in the background. The only circumstances under which the library will not retry is when a connection failure is determined to be either a programming error or a user misconfiguration. Some examples of these circumstances are:</p>
<ul>
<li>The broker explicitly rejected a connection with a reason code indicating a configuration error, such as <code>CONNECT_SCOPE_MISMATCH</code> or <code>CONNECT_DUPLICATE_UID</code>.</li>
<li>The library failed to create a network socket before the connection was initiated.</li>
</ul>
<h2>Adding Endpoints and Responders</h2>
<p>As explained in <a class="el" href="devices_and_gateways.html">Devices and Gateways</a>, RDMnet devices can contain endpoints which serve as grouping mechanisms for virtual or physical RDM responders. The RDMnet device API has functionality for managing endpoints and responders on a local device.</p>
<h3>Adding Physical Endpoints and Responders</h3>
<p>Physical endpoints are added using the physical endpoint configuration structure. This structure defines the endpoint number (an integer between 1 and 63,999) and any responders which are present on the endpoint initially.</p>
<p> 
<div class="tab">
  <button id="button_7_c" class="tablinks" onclick="selectLanguage(event, '7', 'c')">C</button>
  <button id="button_7_cpp" class="tablinks" onclick="selectLanguage(event, '7', 'cpp')">C++</button>
</div>
<div id="div_7_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Create a physical endpoint numbered 1, with no responders on it initially.</span></div><div class="line"><a class="code" href="struct_rdmnet_physical_endpoint_config.html">RdmnetPhysicalEndpointConfig</a> endpoint_config = <a class="code" href="group__rdmnet__device.html#gae49152ddbe7def8c181623e8a41590bb">RDMNET_PHYSICAL_ENDPOINT_INIT</a>(1);</div><div class="line"></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#ga669ad8832cd619410d3baa0b7cdcdee5">rdmnet_device_add_physical_endpoint</a>(my_device_handle, &amp;endpoint_config);</div><div class="line"><span class="keywordflow">if</span> (result == <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint present.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_7_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Endpoint configs are constructed implicitly from endpoint numbers, so when creating an endpoint</span></div><div class="line"><span class="comment">// with no responders on it initially, it&#39;s as simple as: </span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a875fae87db81a2fe2236566e45892f1b">AddPhysicalEndpoint</a>(1); <span class="comment">// Create a physical endpoint numbered 1</span></div><div class="line"><span class="keywordflow">if</span> (result)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint present.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<p>Adding and removing physical responders from an endpoint will typically be done when an RDMnet gateway discovers or loses RDM responders on its RDM ports. For example:</p>
<p> 
<div class="tab">
  <button id="button_8_c" class="tablinks" onclick="selectLanguage(event, '8', 'c')">C</button>
  <button id="button_8_cpp" class="tablinks" onclick="selectLanguage(event, '8', 'cpp')">C++</button>
</div>
<div id="div_8_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> rdm_responder_discovered(uint16_t port_endpoint_number, <span class="keyword">const</span> <a class="codeRef" doxygen="/home/vsts/work/1/s/external/RDM/docs/RDM.tag:https://etclabs.github.io/RDM/docs/head/" href="https://etclabs.github.io/RDM/docs/head/struct_rdm_uid.html">RdmUid</a>* responder_uid)</div><div class="line">{</div><div class="line">  <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#ga1137858602cb0aa4b57ad5c16804225c">rdmnet_device_add_static_responders</a>(my_device_handle, port_endpoint_number,</div><div class="line">                                                              responder_uid, 1);</div><div class="line">  <span class="keywordflow">if</span> (result == <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div><div class="line">  {</div><div class="line">    <span class="comment">// The responder has been added. If currently connected, the library will send the proper</span></div><div class="line">    <span class="comment">// notification which indicates to connected controllers that there is a new responder present.</span></div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_8_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> RdmResponderDiscovered(uint16_t port_endpoint_number, <span class="keyword">const</span> <a class="codeRef" doxygen="/home/vsts/work/1/s/external/RDM/docs/RDM.tag:https://etclabs.github.io/RDM/docs/head/" href="https://etclabs.github.io/RDM/docs/head/classrdm_1_1_uid.html">rdm::Uid</a>&amp; responder_uid)</div><div class="line">{</div><div class="line">  <span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#aa714b10028ff421736498c2ed6a8a963">AddPhysicalResponder</a>(port_endpoint_number, responder_uid);</div><div class="line">  <span class="keywordflow">if</span> (result)</div><div class="line">  {</div><div class="line">    <span class="comment">// The responder has been added. If currently connected, the library will send the proper</span></div><div class="line">    <span class="comment">// notification which indicates to connected controllers that there is a new responder present.</span></div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<p>You can also add responders initially present on an endpoint at the same time as the endpoint is added. This should be done anytime the initial responders on an endpoint are known, as it reduces the volume of RDMnet messages that need to be sent.</p>
<p> 
<div class="tab">
  <button id="button_9_c" class="tablinks" onclick="selectLanguage(event, '9', 'c')">C</button>
  <button id="button_9_cpp" class="tablinks" onclick="selectLanguage(event, '9', 'cpp')">C++</button>
</div>
<div id="div_9_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Create a physical endpoint numbered 2</span></div><div class="line"><a class="code" href="struct_rdmnet_physical_endpoint_config.html">RdmnetPhysicalEndpointConfig</a> endpoint_config = <a class="code" href="group__rdmnet__device.html#gae49152ddbe7def8c181623e8a41590bb">RDMNET_PHYSICAL_ENDPOINT_INIT</a>(2);</div><div class="line"></div><div class="line"><span class="comment">// UIDs for a group of responders that have already been discovered on this endpoint are contained</span></div><div class="line"><span class="comment">// in the responders array below.</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/RDM/docs/RDM.tag:https://etclabs.github.io/RDM/docs/head/" href="https://etclabs.github.io/RDM/docs/head/struct_rdm_uid.html">RdmUid</a> responders[3] = { </div><div class="line">  { 0x6574, 0x00000001 },</div><div class="line">  { 0x6574, 0x00000002 },</div><div class="line">  { 0x6574, 0x00000003 }</div><div class="line">};</div><div class="line">endpoint_config.<a class="code" href="struct_rdmnet_physical_endpoint_config.html#a193d4c2e86beb012220053f116625601">responders</a> = responders;</div><div class="line">endpoint_config.<a class="code" href="struct_rdmnet_physical_endpoint_config.html#ae03e7714ab2513f42f6576df7da65738">num_responders</a> = 3;</div><div class="line"></div><div class="line"><span class="comment">// Add the endpoint</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#ga669ad8832cd619410d3baa0b7cdcdee5">rdmnet_device_add_physical_endpoint</a>(my_device_handle, &amp;endpoint_config);</div><div class="line"><span class="keywordflow">if</span> (result == <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint and new</span></div><div class="line">  <span class="comment">// responders present.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_9_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Create a physical endpoint numbered 2 with the UIDs of 3 previously-discovered physical</span></div><div class="line"><span class="comment">// responders.</span></div><div class="line">std::vector&lt;rdm::Uid&gt; responders = {</div><div class="line">  { 0x6574, 0x00000001 },</div><div class="line">  { 0x6574, 0x00000002 },</div><div class="line">  { 0x6574, 0x00000003 }</div><div class="line">};</div><div class="line"><a class="code" href="classrdmnet_1_1_physical_endpoint_config.html">rdmnet::PhysicalEndpointConfig</a> endpoint_config(2, responders);</div><div class="line"></div><div class="line"><span class="comment">// Add the endpoint</span></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a875fae87db81a2fe2236566e45892f1b">AddPhysicalEndpoint</a>(endpoint_config);</div><div class="line"><span class="keywordflow">if</span> (result)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint and new</span></div><div class="line">  <span class="comment">// responders present.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<h3>Adding Virtual Endpoints and Responders</h3>
<p>The process for adding virtual endpoints is similar to that for physical endpoints, except that virtual responders can have Dynamic UIDs (see <a class="el" href="roles_and_addressing.html">Roles and Addressing</a> for more information about this).</p>
<p> 
<div class="tab">
  <button id="button_10_c" class="tablinks" onclick="selectLanguage(event, '10', 'c')">C</button>
  <button id="button_10_cpp" class="tablinks" onclick="selectLanguage(event, '10', 'cpp')">C++</button>
</div>
<div id="div_10_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Create a virtual endpoint numbered 3</span></div><div class="line"><a class="code" href="struct_rdmnet_virtual_endpoint_config.html">RdmnetVirtualEndpointConfig</a> endpoint_config = <a class="code" href="group__rdmnet__device.html#ga95829f618daae7db1a9ba04049fc46c6">RDMNET_VIRTUAL_ENDPOINT_INIT</a>(3);</div><div class="line"></div><div class="line"><span class="comment">// The virtual endpoint has a single responder that needs a dynamic UID. The responder needs a</span></div><div class="line"><span class="comment">// permanent Responder ID (RID), which is a UUID that should not change over the lifetime of the</span></div><div class="line"><span class="comment">// responder.</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/struct_etc_pal_uuid.html">EtcPalUuid</a> rid;</div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__uuid.html#ga8da6cbed139b61853a98f41120e73b29">etcpal_string_to_uuid</a>(<span class="stringliteral">&quot;f7c58fe2-d380-4367-91d1-b148eade448d&quot;</span>, &amp;rid);</div><div class="line">endpoint_config.<a class="code" href="struct_rdmnet_virtual_endpoint_config.html#a1ffc5cad463b0ecb1cbfcf73b7b939ca">dynamic_responders</a> = &amp;rid;</div><div class="line">endpoint_config.<a class="code" href="struct_rdmnet_virtual_endpoint_config.html#a4fd8e58c72865cbad3db8627aadb3f6f">num_dynamic_responders</a> = 1;</div><div class="line"></div><div class="line"><span class="comment">// Add the endpoint</span></div><div class="line"><a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__device.html#gaa4712d4dc1131e6d6390ce157c0aeb11">rdmnet_device_add_virtual_endpoint</a>(my_device_handle, &amp;endpoint_config);</div><div class="line"><span class="keywordflow">if</span> (result == <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint present,</span></div><div class="line">  <span class="comment">// and request a dynamic UID for the responder which will be delivered to the</span></div><div class="line">  <span class="comment">// RdmnetDeviceDynamicUidStatusCallback.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_10_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="comment">// Create a virtual endpoint numbered 3, which has a single responder that needs a dynamic UID. The</span></div><div class="line"><span class="comment">// responder needs a permanent Responder ID (RID), which is a UUID that should not change over the</span></div><div class="line"><span class="comment">// lifetime of the responder.</span></div><div class="line">std::vector&lt;etcpal::Uuid&gt; responders = { <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/classetcpal_1_1_uuid.html#ab017791f5f66829527591d8bd6bd840f">etcpal::Uuid::FromString</a>(<span class="stringliteral">&quot;f7c58fe2-d380-4367-91d1-b148eade448d&quot;</span>) };</div><div class="line"><a class="code" href="classrdmnet_1_1_virtual_endpoint_config.html">rdmnet::VirtualEndpointConfig</a> endpoint_config(3, responders);</div><div class="line"></div><div class="line"><span class="comment">// Add the endpoint</span></div><div class="line"><span class="keyword">auto</span> result = device.<a class="code" href="classrdmnet_1_1_device.html#a99f7314c8662242597afe5c54b4800d7">AddVirtualEndpoint</a>(endpoint_config);</div><div class="line"><span class="keywordflow">if</span> (result)</div><div class="line">{</div><div class="line">  <span class="comment">// The endpoint has been added. If currently connected, the library will send the proper</span></div><div class="line">  <span class="comment">// notification which indicates to connected controllers that there is a new endpoint present,</span></div><div class="line">  <span class="comment">// and request a dynamic UID for the responder which will be delivered to the</span></div><div class="line">  <span class="comment">// rdmnet::DeviceNotifyHandler::HandleDynamicUidStatus() callback.</span></div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<p>Before dynamic virtual responders can be used, they must be assigned a dynamic UID. The status of dynamic UID assignment is communicated through the dynamic UID status callback.</p>
<p> 
<div class="tab">
  <button id="button_11_c" class="tablinks" onclick="selectLanguage(event, '11', 'c')">C</button>
  <button id="button_11_cpp" class="tablinks" onclick="selectLanguage(event, '11', 'cpp')">C++</button>
</div>
<div id="div_11_c" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> handle_dynamic_uid_status(<a class="code" href="group__rdmnet__device.html#ga527b7210f4bc35da527d698f54681266">rdmnet_device_t</a> handle, <span class="keyword">const</span> <a class="code" href="struct_rdmnet_dynamic_uid_assignment_list.html">RdmnetDynamicUidAssignmentList</a>* list, <span class="keywordtype">void</span>* context)</div><div class="line">{</div><div class="line">  <span class="comment">// Check handles and/or context as necessary...</span></div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="struct_rdmnet_dynamic_uid_mapping.html">RdmnetDynamicUidMapping</a>* mapping = list-&gt;<a class="code" href="struct_rdmnet_dynamic_uid_assignment_list.html#af8d7a5c73e14c6d2f6aa2619619c6ddb">mappings</a>; mapping &lt; list-&gt;mappings + list-&gt;<a class="code" href="struct_rdmnet_dynamic_uid_assignment_list.html#a3725222dfe8114e80a413479ad6e8f1a">num_mappings</a>;</div><div class="line">       ++mapping)</div><div class="line">  {</div><div class="line">    <span class="keywordflow">if</span> (mapping-&gt;status_code == <a class="code" href="group__rdmnet__api__common.html#ggafc5c9ee7dffbca259051716bacea9620a1b3e6c28f0859c283862abf73923b388">kRdmnetDynamicUidStatusOk</a>)</div><div class="line">    {</div><div class="line">      <span class="comment">// This function is assumed to add the dynamic UID to the virtual responder&#39;s runtime data.</span></div><div class="line">      <span class="comment">// This UID should be used to determine whether an RDM command received later is addressed to</span></div><div class="line">      <span class="comment">// the virtual responder.</span></div><div class="line">      set_responder_dynamic_uid(&amp;mapping-&gt;rid, &amp;mapping-&gt;uid);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">      <span class="keywordtype">char</span> rid_str[<a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a>];</div><div class="line">      <a class="codeRef" doxygen="/home/vsts/work/1/s/external/EtcPal/docs/etcpal.tag:https://etclabs.github.io/EtcPal/docs/head/" href="https://etclabs.github.io/EtcPal/docs/head/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a>(&amp;mapping-&gt;rid, rid_str);</div><div class="line">      printf(<span class="stringliteral">&quot;Error obtaining dynamic UID for responder %s: &#39;%s&#39;\n&quot;</span>, rid_str,</div><div class="line">             <a class="code" href="group__rdmnet__api__common.html#ga362e057a96421081d8551d65bf403b6a">rdmnet_dynamic_uid_status_to_string</a>(mapping-&gt;status_code));</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
<div id="div_11_cpp" class="tabcontent">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyDeviceNotifyHandler::HandleDynamicUidStatus(<a class="code" href="group__rdmnet__device__cpp.html#ga2a47837b20a3f1778644a15ff24077a2">rdmnet::DeviceHandle</a> handle,</div><div class="line">                                                   <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_dynamic_uid_assignment_list.html">rdmnet::DynamicUidAssignmentList</a>&amp; list)</div><div class="line">{</div><div class="line">  <span class="comment">// Check handles as necessary...</span></div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; mapping : list.<a class="code" href="classrdmnet_1_1_dynamic_uid_assignment_list.html#adcbcc8c9912e129b23d55e15565433d6">GetMappings</a>())</div><div class="line">  {</div><div class="line">    <span class="keywordflow">if</span> (mapping.IsOk())</div><div class="line">    {</div><div class="line">      <span class="comment">// This function is assumed to add the dynamic UID to the virtual responder&#39;s runtime data.</span></div><div class="line">      <span class="comment">// This UID should be used to determine whether an RDM command received later is addressed to</span></div><div class="line">      <span class="comment">// the virtual responder.</span></div><div class="line">      SetResponderDynamicUid(mapping.rid, mapping.uid);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Error obtaining dynamic UID for responder &quot;</span> &lt;&lt; mapping.rid.ToString() &lt;&lt; <span class="stringliteral">&quot;: &#39;&quot;</span></div><div class="line">                &lt;&lt; mapping.CodeToString() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> 
</div>
</p>
<p>One last thing about endpoints: if the set of physical and virtual endpoints that a device has is known at initialization time, they can be added to the initial configuration structures for a device instance, so that they don't need to be added later.</p>
<h2>Handling RDM Commands</h2>
<p>Handling RDM commands is the main functionality of RDMnet devices. See <a class="el" href="handling_rdm_commands.html">Handling RDM Commands</a> for information on how to do this. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting Started</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
